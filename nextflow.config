/**
    Metabolomics Pipeline (MP)
    Copyright (C) lemas-research-group          
          
    This script is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.
    
    This script is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.
    
    You should have received a copy of the GNU General Public License
    along with this script.  If not, see <http://www.gnu.org/licenses/>.
    
    For any bugs or problems found, please contact us at
    - [email placeholder]; 
    - [github placeholder]
*/

manifest {
    homePage = 'https://github.com/GalaxyDream/metabolomics_data_processing'
    description = 'Metabolomic data processing pipeline'
    mainScript = 'run_sample.nf'
    version = '0.0.0'
}

trace 
{
    enabled = true
    fields = 'task_id, name, status, exit, module, submit, start, complete, duration, realtime, %cpu, rss, vmem, peak_rss, peak_vmem'
}

timeline 
{
    enabled = true
}

params 
{
    input_folder = "./data/DCSM/"
    sample_data = "DCSM"
    version = null
    help = null

// Common parameters

    input_file = "/Users/xinsongdu/mnt/projects/metabolomics_data_processing/data/DCSM/DCSM.mzXML"
    output_dir = "./"
    mzTolerance = 0.00
    noise = 100
    ppm = 25

// XCMS parameters

    peakwidth_low = 0.6
    peakwidth_high = 30.0
    prefilter_low = 1
    prefilter_high = 1000
    integrate = 2
    xcms_peak_output = "xcms_dcsm_peaks.csv"

// MZmine parameters

    x_output = "config.xml"
//    mzmine_input = "/Users/xinsongdu/mnt/projects/metabolomics_data_processing/data/DCSM/DCSM.mzXML"
    ms_level = 1
//    detector_noiselevel = 100
    detector_scalelevel = 20
    detector_windowsize = 0.3
    buider_mintimespan = 0.04
    builder_minheight = 5000.0
//    builder_abstolerance = 0.01
//    builder_ppm = 5.0
    decov_snthreshold = 10.0
    decov_wavscamin = 0.02
    decov_wavscamax = 0.8
    decov_peadurmin = 0.02
    decov_peadurmax = 0.6
    mzmine_peak_output = "/Users/xinsongdu/mnt/projects/metabolomics_data_processing/results/mzmine_dcsm_peaks.csv"

}

process 
{
//    executor = 'slurm'    
    
    withName: peakDetection_xcms
    {
        time =  '15m'
        cpus = 2
        memory = '12 GB'
//        jobName = "run_sample"     
    }
    withName: batchfile_generation_mzmine
    {
        time =  '15m'
        cpus = 1
        memory = '4 GB'
//        jobName = "batchfile_generation_mzmine"     
    }
    withName: peakDetection_mzmine
    {
        time =  '15m'
        cpus = 1
        memory = '16 GB'
//        jobName = "batchfile_generation_mzmine"     
    }
}